{"ast":null,"code":"import { defaultProperties, backwardCompatibilityProperties } from './properties';\nimport { IvyPinch } from './ivypinch';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction PinchZoomComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵlistener(\"click\", function PinchZoomComponent_div_2_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.toggleZoom();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"pz-zoom-button-out\", ctx_r0.isZoomedIn);\n  }\n}\n\nconst _c0 = [\"*\"];\nexport const _defaultComponentProperties = {\n  overflow: \"hidden\",\n  disableZoomControl: \"auto\",\n  backgroundColor: \"rgba(0,0,0,0.85)\"\n};\nexport let PinchZoomComponent = /*#__PURE__*/(() => {\n  class PinchZoomComponent {\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      this.defaultComponentProperties = this.getDefaultComponentProperties();\n      this.applyPropertiesDefault(this.defaultComponentProperties, {});\n    }\n\n    set properties(value) {\n      if (value) {\n        this._properties = value;\n      }\n    }\n\n    get properties() {\n      return this._properties;\n    } // transitionDuration\n\n\n    set transitionDurationBackwardCompatibility(value) {\n      if (value) {\n        this._transitionDuration = value;\n      }\n    }\n\n    set transitionDuration(value) {\n      if (value) {\n        this._transitionDuration = value;\n      }\n    }\n\n    get transitionDuration() {\n      return this._transitionDuration;\n    } // doubleTap\n\n\n    set doubleTapBackwardCompatibility(value) {\n      if (value) {\n        this._doubleTap = value;\n      }\n    }\n\n    set doubleTap(value) {\n      if (value) {\n        this._doubleTap = value;\n      }\n    }\n\n    get doubleTap() {\n      return this._doubleTap;\n    } // doubleTapScale\n\n\n    set doubleTapScaleBackwardCompatibility(value) {\n      if (value) {\n        this._doubleTapScale = value;\n      }\n    }\n\n    set doubleTapScale(value) {\n      if (value) {\n        this._doubleTapScale = value;\n      }\n    }\n\n    get doubleTapScale() {\n      return this._doubleTapScale;\n    } // autoZoomOut\n\n\n    set autoZoomOutBackwardCompatibility(value) {\n      if (value) {\n        this._autoZoomOut = value;\n      }\n    }\n\n    set autoZoomOut(value) {\n      if (value) {\n        this._autoZoomOut = value;\n      }\n    }\n\n    get autoZoomOut() {\n      return this._autoZoomOut;\n    } // limitZoom\n\n\n    set limitZoomBackwardCompatibility(value) {\n      if (value) {\n        this._limitZoom = value;\n      }\n    }\n\n    set limitZoom(value) {\n      if (value) {\n        this._limitZoom = value;\n      }\n    }\n\n    get limitZoom() {\n      return this._limitZoom;\n    }\n\n    get hostOverflow() {\n      return this.properties['overflow'];\n    }\n\n    get hostBackgroundColor() {\n      return this.properties['backgroundColor'];\n    }\n\n    get isTouchScreen() {\n      var prefixes = ' -webkit- -moz- -o- -ms- '.split(' ');\n\n      var mq = function (query) {\n        return window.matchMedia(query).matches;\n      };\n\n      if ('ontouchstart' in window) {\n        return true;\n      } // include the 'heartz' as a way to have a non matching MQ to help terminate the join\n      // https://git.io/vznFH\n\n\n      var query = ['(', prefixes.join('touch-enabled),('), 'heartz', ')'].join('');\n      return mq(query);\n    }\n\n    get isDragging() {\n      return this.pinchZoom ? this.pinchZoom.isDragging() : undefined;\n    }\n\n    get isDisabled() {\n      return this.properties['disabled'];\n    }\n\n    get scale() {\n      return this.pinchZoom.scale;\n    }\n\n    get isZoomedIn() {\n      return this.scale > 1;\n    }\n\n    get scaleLevel() {\n      return Math.round(this.scale / this._zoomControlScale);\n    }\n\n    get maxScale() {\n      return this.pinchZoom.maxScale;\n    }\n\n    get isZoomLimitReached() {\n      return this.scale >= this.maxScale;\n    }\n\n    get _zoomControlScale() {\n      return this.getPropertiesValue('zoomControlScale');\n    }\n\n    ngOnInit() {\n      this.initPinchZoom();\n      /* Calls the method until the image size is available */\n\n      this.detectLimitZoom();\n    }\n\n    ngOnChanges(changes) {\n      let changedProperties = this.getProperties(changes);\n      changedProperties = this.renameProperties(changedProperties);\n      this.applyPropertiesDefault(this.defaultComponentProperties, changedProperties);\n    }\n\n    ngOnDestroy() {\n      this.destroy();\n    }\n\n    initPinchZoom() {\n      if (this.properties['disabled']) {\n        return;\n      }\n\n      this.properties['element'] = this.elementRef.nativeElement.querySelector('.pinch-zoom-content');\n      this.pinchZoom = new IvyPinch(this.properties);\n    }\n\n    getProperties(changes) {\n      let properties = {};\n\n      for (var prop in changes) {\n        if (prop !== 'properties') {\n          properties[prop] = changes[prop].currentValue;\n        }\n\n        if (prop === 'properties') {\n          properties = changes[prop].currentValue;\n        }\n      }\n\n      return properties;\n    }\n\n    renameProperties(properties) {\n      for (var prop in properties) {\n        if (backwardCompatibilityProperties[prop]) {\n          properties[backwardCompatibilityProperties[prop]] = properties[prop];\n          delete properties[prop];\n        }\n      }\n\n      return properties;\n    }\n\n    applyPropertiesDefault(defaultProperties, properties) {\n      this.properties = Object.assign({}, defaultProperties, properties);\n    }\n\n    toggleZoom() {\n      this.pinchZoom.toggleZoom();\n    }\n\n    isControl() {\n      if (this.isDisabled) {\n        return false;\n      }\n\n      if (this.properties['disableZoomControl'] === \"disable\") {\n        return false;\n      }\n\n      if (this.isTouchScreen && this.properties['disableZoomControl'] === \"auto\") {\n        return false;\n      }\n\n      return true;\n    }\n\n    detectLimitZoom() {\n      if (this.pinchZoom) {\n        this.pinchZoom.detectLimitZoom();\n      }\n    }\n\n    destroy() {\n      this.pinchZoom.destroy();\n    }\n\n    getPropertiesValue(propertyName) {\n      if (this.properties && this.properties[propertyName]) {\n        return this.properties[propertyName];\n      } else {\n        return this.defaultComponentProperties[propertyName];\n      }\n    }\n\n    getDefaultComponentProperties() {\n      return Object.assign(Object.assign({}, defaultProperties), _defaultComponentProperties);\n    }\n\n  }\n\n  PinchZoomComponent.ɵfac = function PinchZoomComponent_Factory(t) {\n    return new (t || PinchZoomComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n\n  PinchZoomComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PinchZoomComponent,\n    selectors: [[\"pinch-zoom\"], [\"\", \"pinch-zoom\", \"\"]],\n    hostVars: 4,\n    hostBindings: function PinchZoomComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"overflow\", ctx.hostOverflow)(\"background-color\", ctx.hostBackgroundColor);\n      }\n    },\n    inputs: {\n      properties: \"properties\",\n      transitionDurationBackwardCompatibility: [\"transition-duration\", \"transitionDurationBackwardCompatibility\"],\n      transitionDuration: \"transitionDuration\",\n      doubleTapBackwardCompatibility: [\"double-tap\", \"doubleTapBackwardCompatibility\"],\n      doubleTap: \"doubleTap\",\n      doubleTapScaleBackwardCompatibility: [\"double-tap-scale\", \"doubleTapScaleBackwardCompatibility\"],\n      doubleTapScale: \"doubleTapScale\",\n      autoZoomOutBackwardCompatibility: [\"auto-zoom-out\", \"autoZoomOutBackwardCompatibility\"],\n      autoZoomOut: \"autoZoomOut\",\n      limitZoomBackwardCompatibility: [\"limit-zoom\", \"limitZoomBackwardCompatibility\"],\n      limitZoom: \"limitZoom\",\n      disabled: \"disabled\",\n      disablePan: \"disablePan\",\n      overflow: \"overflow\",\n      zoomControlScale: \"zoomControlScale\",\n      disableZoomControl: \"disableZoomControl\",\n      backgroundColor: \"backgroundColor\",\n      limitPan: \"limitPan\",\n      minPanScale: \"minPanScale\",\n      minScale: \"minScale\",\n      listeners: \"listeners\",\n      wheel: \"wheel\",\n      autoHeight: \"autoHeight\",\n      wheelZoomFactor: \"wheelZoomFactor\",\n      draggableImage: \"draggableImage\"\n    },\n    exportAs: [\"pinchZoom\"],\n    features: [i0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c0,\n    decls: 3,\n    vars: 3,\n    consts: [[1, \"pinch-zoom-content\"], [\"class\", \"pz-zoom-button pz-zoom-control-position-bottom\", 3, \"pz-zoom-button-out\", \"click\", 4, \"ngIf\"], [1, \"pz-zoom-button\", \"pz-zoom-control-position-bottom\", 3, \"click\"]],\n    template: function PinchZoomComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵprojection(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, PinchZoomComponent_div_2_Template, 1, 2, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"pz-dragging\", ctx.isDragging);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isControl());\n      }\n    },\n    directives: [i1.NgIf],\n    styles: [\"[_nghost-%COMP%]{position:relative;overflow:hidden;display:block}.pinch-zoom-content[_ngcontent-%COMP%]{height:inherit}.pz-dragging[_ngcontent-%COMP%]{cursor:all-scroll}.pz-zoom-button[_ngcontent-%COMP%]{position:absolute;z-index:1000;color:#fff;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE1LjUgMTRoLS43OWwtLjI4LS4yN0MxNS40MSAxMi41OSAxNiAxMS4xMSAxNiA5LjUgMTYgNS45MSAxMy4wOSAzIDkuNSAzUzMgNS45MSAzIDkuNSA1LjkxIDE2IDkuNSAxNmMxLjYxIDAgMy4wOS0uNTkgNC4yMy0xLjU3bC4yNy4yOHYuNzlsNSA0Ljk5TDIwLjQ5IDE5bC00Ljk5LTV6bS02IDBDNy4wMSAxNCA1IDExLjk5IDUgOS41UzcuMDEgNSA5LjUgNSAxNCA3LjAxIDE0IDkuNSAxMS45OSAxNCA5LjUgMTR6IiBpZD0ic3ZnXzEiIGNsYXNzPSIiIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMSIvPjxwYXRoIGQ9Ik0xMiAxMGgtMnYySDl2LTJIN1Y5aDJWN2gxdjJoMnYxeiIgaWQ9InN2Z18zIiBjbGFzcz0iIiBmaWxsPSIjZmZmZmZmIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PC9zdmc+),url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE1LjUgMTRoLS43OWwtLjI4LS4yN0MxNS40MSAxMi41OSAxNiAxMS4xMSAxNiA5LjUgMTYgNS45MSAxMy4wOSAzIDkuNSAzUzMgNS45MSAzIDkuNSA1LjkxIDE2IDkuNSAxNmMxLjYxIDAgMy4wOS0uNTkgNC4yMy0xLjU3bC4yNy4yOHYuNzlsNSA0Ljk5TDIwLjQ5IDE5bC00Ljk5LTV6bS02IDBDNy4wMSAxNCA1IDExLjk5IDUgOS41UzcuMDEgNSA5LjUgNSAxNCA3LjAxIDE0IDkuNSAxMS45OSAxNCA5LjUgMTR6TTcgOWg1djFIN3oiIGlkPSJzdmdfMiIgY2xhc3M9IiIgZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIi8+PC9nPjwvc3ZnPg==);background-color:#000c;background-position:center,-1000px;background-repeat:no-repeat,no-repeat;background-size:40px;width:56px;height:56px;border-radius:4px;opacity:.5;cursor:pointer;transition:opacity .1s;-webkit-user-select:none;user-select:none}.pz-zoom-button-out[_ngcontent-%COMP%]{background-position:-1000px,center}.pz-zoom-button[_ngcontent-%COMP%]:hover{opacity:.7}.pz-zoom-button.pz-zoom-control-position-right[_ngcontent-%COMP%]{right:16px;top:50%;margin-top:-28px}.pz-zoom-button.pz-zoom-control-position-right-bottom[_ngcontent-%COMP%]{right:16px;bottom:32px}.pz-zoom-button.pz-zoom-control-position-bottom[_ngcontent-%COMP%]{bottom:16px;left:50%;margin-left:-28px}.pz-zoom-control[_ngcontent-%COMP%]{position:absolute;background-color:#000c;border-radius:4px;overflow:hidden}.pz-zoom-control.pz-zoom-control-position-right[_ngcontent-%COMP%]{right:16px;top:50%;margin-top:-48px}.pz-zoom-control.pz-zoom-control-position-right-bottom[_ngcontent-%COMP%]{right:16px;bottom:32px}.pz-zoom-control.pz-zoom-control-position-bottom[_ngcontent-%COMP%]{bottom:16px;left:50%;margin-left:-48px}.pz-zoom-in[_ngcontent-%COMP%], .pz-zoom-out[_ngcontent-%COMP%]{width:48px;height:48px;background-position:center;background-repeat:no-repeat;opacity:1;cursor:pointer}.pz-zoom-in[_ngcontent-%COMP%]:hover, .pz-zoom-out[_ngcontent-%COMP%]:hover{background-color:#fff3}.pz-zoom-control-position-bottom[_ngcontent-%COMP%]   .pz-zoom-in[_ngcontent-%COMP%], .pz-zoom-control-position-bottom[_ngcontent-%COMP%]   .pz-zoom-out[_ngcontent-%COMP%]{float:right}.pz-disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.pz-disabled[_ngcontent-%COMP%]:hover{background-color:#fff0}.pz-zoom-in[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgc3R5bGU9IiI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiIGlkPSJzdmdfMSIgY2xhc3M9IiIgc3Ryb2tlPSJub25lIiBmaWxsPSIjZmZmZmZmIiBmaWxsLW9wYWNpdHk9IjEiLz48cGF0aCBkPSJNLTE1LjgzNjczNDQyMDQ2MTY1Myw0NC41MzU0MDkzMDY3MTAxOCBoNTguMjA0MDgwODI3NTkzMDkgdi02LjU3NjIyNjcyMzM2OTIyMTUgSC0xNS44MzY3MzQ0MjA0NjE2NTMgeiIgZmlsbD0ibm9uZSIgaWQ9InN2Z18yIiBjbGFzcz0iIiBzdHJva2U9Im5vbmUiLz48L2c+PC9zdmc+)}.pz-zoom-out[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHJlY3QgaWQ9ImJhY2tncm91bmRyZWN0IiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSIwIiB5PSIwIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz48ZyBjbGFzcz0iY3VycmVudExheWVyIiBzdHlsZT0iIj48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PHBhdGggZD0iTTE5IDEzSDV2LTJoMTR2MnoiIGlkPSJzdmdfMSIgY2xhc3M9IiIgZmlsbD0iI2ZmZmZmZiIgZmlsbC1vcGFjaXR5PSIxIi8+PC9nPjwvc3ZnPg==)}\"]\n  });\n  return PinchZoomComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}